{% load static %}
<!DOCTYPE html>
<html lang="es" class="h-full" data-theme="winter">
<head>
	<meta charset="UTF-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge" />
	<title>{% block title %}Proyecto Base{% endblock %}</title>
	<!-- Tailwind (CDN dev) -->
	<script src="https://cdn.tailwindcss.com"></script>
	<script>tailwind.config = { darkMode: 'class', theme: { extend: {} } }</script>
	<!-- DaisyUI -->
	<link href="https://cdn.jsdelivr.net/npm/daisyui@4.12.10/dist/full.min.css" rel="stylesheet" type="text/css" />
	<!-- Line Awesome (icons8 CDN sin integrity para evitar bloqueo) -->
	<link rel="stylesheet" href="https://maxst.icons8.com/vue-static/landings/line-awesome/line-awesome/1.3.0/css/line-awesome.min.css" />

	<!-- LibrerÃ­as para exportaciÃ³n a Excel y PDF -->
	<script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.31/jspdf.plugin.autotable.min.js"></script>

	<!-- CSS responsivo para pantallas pequeÃ±as -->
	<link rel="stylesheet" href="{% static 'css/responsive-small-screens.css' %}" />

	<!-- Fuente opcional -->
	<link rel="preconnect" href="https://fonts.googleapis.com">
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

	{% block head_extra %}{% endblock %}
</head>

<body
	class="min-h-full flex flex-col bg-base-100 text-base-content transition-colors {% block body_class %}{% endblock %}"
	{% block body_extra %}{% endblock %}>

	{% block header %}
	<!-- Barra superior con DaisyUI -->
	<header class="navbar border-b border-b-lime-500  bg-base-100 sticky top-0 z-40">
		<div class="flex-1 px-2">
			<a href="{% url 'home' %}" class="flex items-center gap-2 font-bold text-primary">
				<img src="{% static 'img/logo-colmena.png'%}" alt="Logo Colmena" class="h-10">
				<span class="text-lime-600">COLMENA</span>
			</a>
		</div>
		<nav class="flex-none">
			<ul class="menu menu-horizontal hidden md:flex gap-2">
				<li><a href="{% url 'home' %}" class="gap-1"><i class="las la-home"></i><span>My Club</span></a></li>
				{% if club %}
				<li><a href="{% url 'clubs:player_create' club_id=club.id %}" class="gap-1"><i class="las la-user-plus"></i><span>Registrar</span></a></li>
				{% else %}
				<li><a href="#" class="gap-1"><i class="las la-user-plus"></i><span>Registrar</span></a></li>
				{% endif %}
				{% if club %}
				<li><a href="{% url 'clubs:players_list' club_id=club.id %}" class="gap-1"><i class="las la-users"></i><span>Jugadores</span></a></li>
				{% else %}
				<li><a href="#" class="gap-1"><i class="las la-users"></i><span>Jugadores</span></a></li>
				{% endif %}
			</ul>
			<div class="dropdown dropdown-end md:hidden">
				<label tabindex="0" class="btn btn-ghost btn-square">
					<i class="las la-bars text-2xl"></i>
				</label>
				<ul tabindex="0" class="menu dropdown-content mt-3 p-2 shadow bg-base-100 rounded-box w-52 z-50">
					<li><a href="{% url 'home' %}" class="gap-1"><i class="las la-home"></i>My Club</a></li>
					{% if club %}
					<li><a href="{% url 'clubs:player_create' club_id=club.id %}" class="gap-1"><i class="las la-user-plus"></i> Registrar</a></li>
					{% else %}
					<li><a href="#" class="gap-1"><i class="las la-user-plus"></i> Registrar</a></li>
					{% endif %}
					{% if club %}
					<li><a href="{% url 'clubs:players_list' club_id=club.id %}" class="gap-1"><i class="las la-users"></i> Jugadores</a></li>
					{% else %}
					<li><a href="#" class="gap-1"><i class="las la-users"></i> Jugadores</a></li>
					{% endif %}
					<hr class="my-1" />
					{% if user.is_authenticated %}
					<li><a href="{% url 'accounts:profile' %}" class="gap-1"><i class="las la-id-badge"></i> Perfil</a>
					</li>
					<li>
						<form method="post" action="{% url 'accounts:logout' %}" class="logout-form">
							{% csrf_token %}
							<button type="submit"
								class="logout-btn w-full text-left text-error gap-1 flex items-center px-4 py-2 rounded-btn">
								<i class="las la-sign-out-alt"></i> Salir
							</button>
						</form>
					</li>
					{% else %}
					<li><a href="{% url 'accounts:login' %}" class="gap-1"><i class="las la-sign-in-alt"></i>
							Ingresar</a></li>
					{% endif %}
				</ul>
			</div>
			<div class="flex items-center gap-2 ml-2">
				{% if user.is_authenticated %}
				<div class="dropdown dropdown-end">
					<label tabindex="0" class="btn btn-ghost normal-case flex gap-2 px-2">
						<!-- Avatar del usuario -->
						<div class="avatar">
							<div class="w-8 h-8 rounded-full ring ring-primary ring-offset-base-100 ring-offset-1">
								{% if user.picture %}
									<img src="{{ user.picture.url }}" alt="{{ user.email }}" />
								{% else %}
									<div class="bg-primary text-primary-content flex items-center justify-center w-full h-full">
										<span class="text-sm font-bold">{{ user.email|first|upper }}</span>
									</div>
								{% endif %}
							</div>
						</div>
						<!-- Email (solo visible en pantallas medianas y grandes) -->
						<span class="hidden sm:inline max-w-[140px] truncate">{{ user.email|default:'Usuario' }}</span>
						<i class="las la-angle-down"></i>
					</label>
					<ul tabindex="0" class="menu dropdown-content mt-3 p-2 shadow bg-base-100 rounded-box w-52 z-50">
						<!-- InformaciÃ³n del usuario en el dropdown -->
						<li class="menu-title px-4 py-2">
							<div class="flex items-center gap-3 mb-2">
								<div class="avatar">
									<div class="w-12 h-12 rounded-full ring ring-primary ring-offset-base-100 ring-offset-2">
										{% if user.picture %}
											<img src="{{ user.picture.url }}" alt="{{ user.email }}" />
										{% else %}
											<div class="bg-primary text-primary-content flex items-center justify-center w-full h-full">
												<span class="text-lg font-bold">{{ user.email|first|upper }}</span>
											</div>
										{% endif %}
									</div>
								</div>
								<div class="flex-1 min-w-0">
									<p class="font-semibold truncate">
										{% if user.first_name %}
											{{ user.first_name }} {{ user.last_name }}
										{% else %}
											Usuario
										{% endif %}
									</p>
									<p class="text-xs opacity-60 truncate">{{ user.email }}</p>
								</div>
							</div>
						</li>
					<div class="divider my-0"></div>
					<li><a href="{% url 'accounts:profile' %}" class="gap-2"><i class="las la-id-badge"></i>
							Mi Perfil</a></li>
					<li><a href="{% url 'accounts:profile_edit' %}" class="gap-2"><i class="las la-user-edit"></i>
							Editar Perfil</a></li>
					<div class="divider my-0"></div>
						<li>
							<form method="post" action="{% url 'accounts:logout' %}" class="logout-form">
								{% csrf_token %}
								<button type="submit"
									class="logout-btn w-full text-left text-error gap-2 flex items-center px-4 py-2 rounded-btn">
									<i class="las la-sign-out-alt"></i> Cerrar SesiÃ³n
								</button>
							</form>
						</li>
					</ul>
				</div>
				{% else %}
				<a href="{% url 'accounts:login' %}" class="btn btn-primary btn-sm gap-2"><i
						class="las la-sign-in-alt"></i> Ingresar</a>
				{% endif %}
			</div>
		</nav>
	</header>
	{% endblock header %}

	<!-- Mensajes flash -->
	{% if messages %}
	<div class="max-w-4xl mx-auto mt-4 px-4 space-y-2">
		{% for message in messages %}
		<div class="alert shadow-sm {{ message.tags|default:'info' }} flex items-center">
			<i class="las la-info-circle text-xl"></i>
			<span class="flex-1">{{ message }}</span>
			<button class="dismiss-msg btn btn-xs btn-circle btn-ghost" aria-label="Cerrar">âœ•</button>
		</div>
		{% endfor %}
	</div>
	{% endif %}

	<!-- Contenido principal -->
	<main class="flex-1 w-full mx-auto max-w-7xl px-4 sm:px-6 lg:px-8 py-8">
		{% block content %}
		<div class="text-center py-20">
			<h1 class="text-4xl font-bold mb-4">Bienvenido ðŸ‘‹</h1>
			<p class="opacity-80 max-w-xl mx-auto">Usa este template como base para construir tus vistas. Extiende este
				archivo e inserta tu contenido dentro del bloque <code>content</code>.</p>
		</div>
		{% endblock %}
	</main>

	{% block footer %}
	<!-- Pie de pÃ¡gina mejorado -->
	<footer class="footer footer-center p-4 md:p-6 mt-12 bg-gradient-to-r from-base-300 via-base-300 to-base-300 border-t border-lime-400/50 backdrop-blur-sm">
		<div class="flex flex-col md:flex-row items-center justify-center gap-4 md:gap-6 w-full">
			<!-- Logo Dev-7 -->
			<div class="flex-shrink-0 pr-4 md:pr-6 border-r border-base-content/20">
				<a href="https://dev-7.com" target="_blank" class="hover:opacity-80 transition-opacity">
					<img src="{% static 'img/logo.png' %}" alt="Dev-7" class="h-10 w-auto object-contain">
				</a>
			</div>
			
			<!-- InformaciÃ³n -->
			<div class="flex flex-col md:flex-row items-center gap-4 md:gap-8">
				<div class="flex flex-col text-left text-xs md:text-sm leading-relaxed">
					<span class="font-semibold">&copy;dev-7.com</span>
					<span class="opacity-70">Derechos Reservados <span id="year"></span></span>
				</div>
				
				<!-- Contacto -->
				<a href="mailto:soluciones@dev-7.com" class="text-cyan-600 hover:text-cyan-400 transition-colors text-xs md:text-sm font-medium flex items-center gap-1">
					<i class="las la-envelope text-sm"></i>
					soluciones@dev-7.com
				</a>
			</div>
		</div>
	</footer>
	{% endblock footer %}

	{% block scripts %}{% endblock %}
	<script>
		// AÃ±o dinÃ¡mico (solo si existe el elemento)
		const yearEl = document.getElementById('year');
		if (yearEl) { yearEl.textContent = new Date().getFullYear(); }

		// MenÃº mÃ³vil
		const btn = document.getElementById('mobileMenuBtn');
		const menu = document.getElementById('mobileMenu');
		if (btn) btn.addEventListener('click', () => menu.classList.toggle('hidden'));

		// Dismiss messages
		document.querySelectorAll('.dismiss-msg').forEach(b => b.addEventListener('click', e => {
			const box = e.target.closest('div');
			box.classList.add('opacity-0', 'scale-95');
			setTimeout(() => box.remove(), 150);
		}));
	</script>
	<script>
		document.querySelectorAll('form input').forEach(el => {
			el.classList.add('input', 'input-bordered', 'input-md', 'w-full');
		});
	</script>
</body>

</html>